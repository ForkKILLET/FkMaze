(()=>{var C=Object.defineProperty;var D=(r,e,t)=>e in r?C(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var d=(r,e)=>()=>(r&&(e=r(r=0)),e);var K=(r,e)=>{for(var t in e)C(r,t,{get:e[t],enumerable:!0})};var b=(r,e,t)=>(D(r,typeof e!="symbol"?e+"":e,t),t);function q(){let r=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(let[t,o]of Object.entries(e)){for(let[n,s]of Object.entries(o))e[n]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},o[n]=e[n],r.set(s[0],s[1]);Object.defineProperty(e,t,{value:o,enumerable:!1})}return Object.defineProperty(e,"codes",{value:r,enumerable:!1}),e.color.close="\x1B[39m",e.bgColor.close="\x1B[49m",e.color.ansi=R(),e.color.ansi256=w(),e.color.ansi16m=S(),e.bgColor.ansi=R(10),e.bgColor.ansi256=w(10),e.bgColor.ansi16m=S(10),Object.defineProperties(e,{rgbToAnsi256:{value:(t,o,n)=>t===o&&o===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(o/255*5)+Math.round(n/255*5),enumerable:!1},hexToRgb:{value:t=>{let o=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(t.toString(16));if(!o)return[0,0,0];let{colorString:n}=o.groups;n.length===3&&(n=[...n].map(l=>l+l).join(""));let s=Number.parseInt(n,16);return[s>>16&255,s>>8&255,s&255]},enumerable:!1},hexToAnsi256:{value:t=>e.rgbToAnsi256(...e.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value:t=>{if(t<8)return 30+t;if(t<16)return 90+(t-8);let o,n,s;if(t>=232)o=((t-232)*10+8)/255,n=o,s=o;else{t-=16;let f=t%36;o=Math.floor(t/36)/5,n=Math.floor(f/6)/5,s=f%6/5}let l=Math.max(o,n,s)*2;if(l===0)return 30;let i=30+(Math.round(s)<<2|Math.round(n)<<1|Math.round(o));return l===2&&(i+=60),i},enumerable:!1},rgbToAnsi:{value:(t,o,n)=>e.ansi256ToAnsi(e.rgbToAnsi256(t,o,n)),enumerable:!1},hexToAnsi:{value:t=>e.ansi256ToAnsi(e.hexToAnsi256(t)),enumerable:!1}}),e}var R,w,S,H,u,T=d(()=>{R=(r=0)=>e=>`\x1B[${e+r}m`,w=(r=0)=>e=>`\x1B[${38+r};5;${e}m`,S=(r=0)=>(e,t,o)=>`\x1B[${38+r};2;${e};${t};${o}m`;H=q(),u=H});var V,j,X,E,F=d(()=>{V=/\b(Chrome|Chromium)\//.test(navigator.userAgent),j=V?{level:1,hasBasic:!0,has256:!1,has16m:!1}:!1,X={stdout:j,stderr:j},E=X});function k(r,e,t){let o=r.indexOf(e);if(o===-1)return r;let n=e.length,s=0,l="";do l+=r.substr(s,o-s)+e+t,s=o+n,o=r.indexOf(e,s);while(o!==-1);return l+=r.slice(s),l}function M(r,e,t,o){let n=0,s="";do{let l=r[o-1]==="\r";s+=r.substr(n,(l?o-1:o)-n)+e+(l?`\r
`:`
`)+t,n=o+1,o=r.indexOf(`
`,n)}while(o!==-1);return s+=r.slice(n),s}var I=d(()=>{});function y(r){return Q(r)}var P,N,v,g,m,L,p,J,Q,x,Z,z,O,A,ee,te,ce,G,$=d(()=>{T();F();I();({stdout:P,stderr:N}=E),v=Symbol("GENERATOR"),g=Symbol("STYLER"),m=Symbol("IS_EMPTY"),L=["ansi","ansi","ansi256","ansi16m"],p=Object.create(null),J=(r,e={})=>{if(e.level&&!(Number.isInteger(e.level)&&e.level>=0&&e.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let t=P?P.level:0;r.level=e.level===void 0?t:e.level},Q=r=>{let e=(...t)=>t.join(" ");return J(e,r),Object.setPrototypeOf(e,y.prototype),e};Object.setPrototypeOf(y.prototype,Function.prototype);for(let[r,e]of Object.entries(u))p[r]={get(){let t=A(this,O(e.open,e.close,this[g]),this[m]);return Object.defineProperty(this,r,{value:t}),t}};p.visible={get(){let r=A(this,this[g],!0);return Object.defineProperty(this,"visible",{value:r}),r}};x=(r,e,t,...o)=>r==="rgb"?e==="ansi16m"?u[t].ansi16m(...o):e==="ansi256"?u[t].ansi256(u.rgbToAnsi256(...o)):u[t].ansi(u.rgbToAnsi(...o)):r==="hex"?x("rgb",e,t,...u.hexToRgb(...o)):u[t][r](...o),Z=["rgb","hex","ansi256"];for(let r of Z){p[r]={get(){let{level:t}=this;return function(...o){let n=O(x(r,L[t],"color",...o),u.color.close,this[g]);return A(this,n,this[m])}}};let e="bg"+r[0].toUpperCase()+r.slice(1);p[e]={get(){let{level:t}=this;return function(...o){let n=O(x(r,L[t],"bgColor",...o),u.bgColor.close,this[g]);return A(this,n,this[m])}}}}z=Object.defineProperties(()=>{},{...p,level:{enumerable:!0,get(){return this[v].level},set(r){this[v].level=r}}}),O=(r,e,t)=>{let o,n;return t===void 0?(o=r,n=e):(o=t.openAll+r,n=e+t.closeAll),{open:r,close:e,openAll:o,closeAll:n,parent:t}},A=(r,e,t)=>{let o=(...n)=>ee(o,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(o,z),o[v]=r,o[g]=e,o[m]=t,o},ee=(r,e)=>{if(r.level<=0||!e)return r[m]?"":e;let t=r[g];if(t===void 0)return e;let{openAll:o,closeAll:n}=t;if(e.includes("\x1B"))for(;t!==void 0;)e=k(e,t.close,t.open),t=t.parent;let s=e.indexOf(`
`);return s!==-1&&(e=M(e,n,o,s)),o+e+n};Object.defineProperties(y.prototype,p);te=y(),ce=y({level:N?N.level:0}),G=te});var W,Y=d(()=>{W={Math:()=>Object.assign(Math,{parseFraction:(r,e)=>{let t=+e,o,n;for(o=n=e.length;!(t%2);t/=2)o--;for(;!(t%5);t/=5)n--;let s=2**o*5**n;return r[0]==="-"&&(t=-t),t+=r*s,[t,s]},simplifyFraction:(r,e)=>{let t=Math.gcd(r,e);return[r/t,e/t]},gcd:(r,e)=>e?Math.gcd(e,r%e):r,lcm:(r,e,t)=>r*e/(t??Math.gcd(r,e))}),String:()=>Object.assign(String.prototype,{split2(r){let e=this.indexOf(r);return e<0?[this]:[this.slice(0,e),this.slice(e+r.length)]}}),Array:()=>Object.assign(Array.prototype,{repeat(r){let e=[];for(;r--;)e=e.concat(this);return e},randomEntry(){let r=~~(Math.random()*1e6)%this.length;return[r,this[r]]}})}});var U={};K(U,{default:()=>h});var a,h,_=d(()=>{$();Y();W.Array();a=class{constructor(e,t){this.r_max=e,this.c_max=t,this.map=Array(e+2).fill().map((o,n)=>Array(t+2).fill().map((s,l)=>({type:l===0||n===0||l===t+1||n===e+1?a.WALL:n%2+l%2,r:n,c:l})))}neighbor(e,t,o="xy"){return a[`d${o}`].map(([n,s])=>[e+n,t+s]).filter(([n,s])=>n>=1&&n<=this.r_max&&s>=1&&s<=this.c_max).map(([n,s])=>this.map[n][s])}cells(){return this.map.flat()}[Symbol.iterator](){return this.cells().values()}async randomize(e,t,{show_progress:o,fps:n}={}){let s=[],l=({r:i,c:f})=>{this.map[i][f].visited=!0,this.neighbor(i,f).filter(({type:c})=>c===a.BARRIER).forEach(c=>{c.sides=this.neighbor(c.r,c.c,c.r%2?"x":"y"),c.visited=!0,s.push(c)})};for(l({r:e,c:t});s.length;){o&&(o(this),await new Promise(B=>setTimeout(B,1e3/n)));let[i,f]=s.randomEntry(),c=f.sides.find(({visited:B})=>!B);c?(f.type=a.PATH,l(c)):f.visited=!1,s.splice(i,1)}for(let i of this)i.type===a.BARRIER&&(i.type=a.WALL)}print(){console.log(this.map.map(e=>e.map(({type:t,visited:o})=>{let n=a.print_chars[t];return o&&(n=G.bgRed(n)),n}).join("")).join(`
`))}draw({canvas:e,zoom:t}){e.width=(this.c_max+2)*t,e.height=(this.r_max+2)*t;let o=e.getContext("2d");for(let{r:n,c:s,type:l,visited:i}of this)o.fillStyle=a.draw_colors[l],o.fillRect(n*t,s*t,t,t),i&&(o.fillStyle="red",o.fillRect((n+.25)*t,(s+.25)*t,.5*t,.5*t))}},h=a;b(h,"WALL",0),b(h,"BARRIER",1),b(h,"PATH",2),b(h,"print_chars","#X "),b(h,"draw_colors",["black","blue","transparent"]),b(h,"dx",[[0,-1],[0,1]]),b(h,"dy",[[-1,0],[1,0]]),b(h,"dxy",[...a.dx,...a.dy])});(async()=>{let{default:r}=await Promise.resolve().then(()=>(_(),U)),e=new r(25,25),t=document.createElement("canvas");document.body.appendChild(t);let o=()=>e.draw({canvas:t,zoom:15});await e.randomize(1,1,{show_progress:o,fps:40}),o(),Object.assign(window,{Maze:r,maze:e})})();})();
//# sourceMappingURL=bundle.js.map
