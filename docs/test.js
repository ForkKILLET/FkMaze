(()=>{var y=Object.defineProperty;var w=(s,i,t)=>i in s?y(s,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[i]=t;var A=(s,i)=>()=>(s&&(i=s(s=0)),i);var R=(s,i)=>{for(var t in i)y(s,t,{get:i[t],enumerable:!0})};var o=(s,i,t)=>(w(s,typeof i!="symbol"?i+"":i,t),t);var m={};R(m,{default:()=>d});var c,d,u=A(()=>{Array.prototype.randomEntry=function(){let s=~~(Math.random()*1e6)%this.length;return[s,this[s]]};c=class{constructor(i,t){this.r_max=i,this.c_max=t,this.map=Array(i+2).fill().map((a,e)=>Array(t+2).fill().map((r,l)=>({type:l===0||e===0||l===t+1||e===i+1?c.WALL:e%2+l%2,r:e,c:l})))}neighbor(i,t,a="xy"){return c[`d${a}`].map(([e,r])=>[i+e,t+r]).filter(([e,r])=>e>=1&&e<=this.r_max&&r>=1&&r<=this.c_max).map(([e,r])=>this.map[e][r])}cells(){return this.map.flat()}[Symbol.iterator](){return this.cells().values()}async randomize(i,t,{show_progress:a,fps:e}={}){let r=[],l=({r:h,c:f})=>{this.map[h][f].visited=!0,this.neighbor(h,f).filter(({type:n})=>n===c.BARRIER).forEach(n=>{n.sides=this.neighbor(n.r,n.c,n.r%2?"x":"y"),n.visited=!0,r.push(n)})};for(l({r:i,c:t});r.length;){a&&(a(this),await new Promise(p=>setTimeout(p,1e3/e)));let[h,f]=r.randomEntry(),n=f.sides.find(({visited:p})=>!p);n?(f.type=c.PATH,l(n)):f.visited=!1,r.splice(h,1)}for(let h of this)h.type===c.BARRIER&&(h.type=c.WALL),delete h.visited}draw({canvas:i,zoom:t}){i.width=(this.c_max+2)*t,i.height=(this.r_max+2)*t;let a=i.getContext("2d");for(let{r:e,c:r,type:l,visited:h}of this)a.fillStyle=c.draw_colors[l],a.fillRect(e*t,r*t,t,t),h&&(a.fillStyle="red",a.fillRect((e+.25)*t,(r+.25)*t,.5*t,.5*t))}},d=c;o(d,"WALL",0),o(d,"BARRIER",1),o(d,"PATH",2),o(d,"print_chars","#X "),o(d,"draw_colors",["black","blue","transparent"]),o(d,"dx",[[0,-1],[0,1]]),o(d,"dy",[[-1,0],[1,0]]),o(d,"dxy",[...c.dx,...c.dy])});(async()=>{let{default:s}=await Promise.resolve().then(()=>(u(),m)),i=new s(25,25),t=document.createElement("canvas");document.body.appendChild(t);let a=()=>i.draw({canvas:t,zoom:15});await i.randomize(1,1,{show_progress:a,fps:40}),a(),Object.assign(window,{Maze:s,maze:i})})();})();
//# sourceMappingURL=test.js.map
