(()=>{var y=Object.defineProperty;var m=(h,i,t)=>i in h?y(h,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):h[i]=t;var p=(h,i,t)=>(m(h,typeof i!="symbol"?i+"":i,t),t);Array.prototype.randomEntry=function(){let h=~~(Math.random()*1e6)%this.length;return[h,this[h]]};var l=class{constructor(i,t){this.r_max=i,this.c_max=t,this.map=Array(i+2).fill().map((n,s)=>Array(t+2).fill().map((r,c)=>({type:c===0||s===0||c===t+1||s===i+1?l.WALL:s%2+c%2,r:s,c})))}neighbor(i,t,n="xy"){return l[`d${n}`].map(([s,r])=>[i+s,t+r]).filter(([s,r])=>s>=1&&s<=this.r_max&&r>=1&&r<=this.c_max).map(([s,r])=>this.map[s][r])}cells(){return this.map.flat()}[Symbol.iterator](){return this.cells().values()}async randomize(i,t,{show_progress:n,fps:s}={}){let r=[],c=({r:e,c:o})=>{this.map[e][o].visited=!0,this.neighbor(e,o).filter(({type:d})=>d===l.BARRIER).forEach(d=>{d.sides=this.neighbor(d.r,d.c,d.r%2?"x":"y"),d.visited=!0,r.push(d)})};for(c({r:i,c:t});r.length;){n&&(n(this),await new Promise(f=>setTimeout(f,1e3/s)));let[e,o]=r.randomEntry(),d=o.sides.find(({visited:f})=>!f);d?(o.type=l.PATH,c(d)):o.visited=!1,r.splice(e,1)}for(let e of this)e.type===l.BARRIER&&(e.type=l.WALL),delete e.visited}draw({canvas:i,zoom:t}){i.width=(this.c_max+2)*t,i.height=(this.r_max+2)*t;let n=i.getContext("2d");for(let{r:s,c:r,type:c,visited:e}of this)n.fillStyle=l.draw_colors[c],n.fillRect(s*t,r*t,t,t),e&&(n.fillStyle="red",n.fillRect((s+.25)*t,(r+.25)*t,.5*t,.5*t))}},a=l;p(a,"WALL",0),p(a,"BARRIER",1),p(a,"PATH",2),p(a,"print_chars","#X "),p(a,"draw_colors",["black","blue","transparent"]),p(a,"dx",[[0,-1],[0,1]]),p(a,"dy",[[-1,0],[1,0]]),p(a,"dxy",[...l.dx,...l.dy]);env.exports=async()=>{let{term:h,chalk:i}=env,t=new a(25,25),n=()=>{h.clear(),h.write(t.map.map(s=>s.map(({type:r,visited:c})=>{let e=a.print_chars[r].repeat(2);return c&&(e=i.bgRed(e)),e}).join("")).join(`\r
`))};await t.randomize(1,1,{show_progress:draw,fps:40}),n()};})();
