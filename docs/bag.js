(()=>{var y=Object.defineProperty;var g=(r,t,i)=>t in r?y(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i;var d=(r,t,i)=>(g(r,typeof t!="symbol"?t+"":t,i),i);var m={Math:()=>Object.assign(Math,{parseFraction:(r,t)=>{let i=+t,n,s;for(n=s=t.length;!(i%2);i/=2)n--;for(;!(i%5);i/=5)s--;let e=2**n*5**s;return r[0]==="-"&&(i=-i),i+=r*e,[i,e]},simplifyFraction:(r,t)=>{let i=Math.gcd(r,t);return[r/i,t/i]},gcd:(r,t)=>t?Math.gcd(t,r%t):r,lcm:(r,t,i)=>r*t/(i??Math.gcd(r,t))}),String:()=>Object.assign(String.prototype,{split2(r){let t=this.indexOf(r);return t<0?[this]:[this.slice(0,t),this.slice(t+r.length)]}}),Array:()=>Object.assign(Array.prototype,{repeat(r){let t=[];for(;r--;)t=t.concat(this);return t},randomEntry(){let r=~~(Math.random()*1e6)%this.length;return[r,this[r]]}})};m.Array();var o=class{constructor(t,i){this.r_max=t,this.c_max=i,this.map=Array(t+2).fill().map((n,s)=>Array(i+2).fill().map((e,h)=>({type:h===0||s===0||h===i+1||s===t+1?o.WALL:s%2+h%2,r:s,c:h})))}neighbor(t,i,n="xy"){return o[`d${n}`].map(([s,e])=>[t+s,i+e]).filter(([s,e])=>s>=1&&s<=this.r_max&&e>=1&&e<=this.c_max).map(([s,e])=>this.map[s][e])}cells(){return this.map.flat()}[Symbol.iterator](){return this.cells().values()}async randomize(t,i,{show_progress:n,fps:s}={}){let e=[],h=({r:a,c:p})=>{this.map[a][p].visited=!0,this.neighbor(a,p).filter(({type:l})=>l===o.BARRIER).forEach(l=>{l.sides=this.neighbor(l.r,l.c,l.r%2?"x":"y"),l.visited=!0,e.push(l)})};for(h({r:t,c:i});e.length;){n&&(n(this),await new Promise(f=>setTimeout(f,1e3/s)));let[a,p]=e.randomEntry(),l=p.sides.find(({visited:f})=>!f);l?(p.type=o.PATH,h(l)):p.visited=!1,e.splice(a,1)}for(let a of this)a.type===o.BARRIER&&(a.type=o.WALL),delete a.visited}draw({canvas:t,zoom:i}){t.width=(this.c_max+2)*i,t.height=(this.r_max+2)*i;let n=t.getContext("2d");for(let{r:s,c:e,type:h,visited:a}of this)n.fillStyle=o.draw_colors[h],n.fillRect(s*i,e*i,i,i),a&&(n.fillStyle="red",n.fillRect((s+.25)*i,(e+.25)*i,.5*i,.5*i))}},c=o;d(c,"WALL",0),d(c,"BARRIER",1),d(c,"PATH",2),d(c,"print_chars","#X "),d(c,"draw_colors",["black","blue","transparent"]),d(c,"dx",[[0,-1],[0,1]]),d(c,"dy",[[-1,0],[1,0]]),d(c,"dxy",[...o.dx,...o.dy]);env.exports=async()=>{let{term:r,chalk:t}=env,i=new c(25,25),n=()=>{r.clear(),r.write(i.map.map(s=>s.map(({type:e,visited:h})=>{let a=c.print_chars[e].repeat(2);return h&&(a=t.bgRed(a)),a}).join("")).join(`\r
`))};await i.randomize(1,1,{show_progress:draw,fps:40}),n()};})();
//# sourceMappingURL=bag.js.map
