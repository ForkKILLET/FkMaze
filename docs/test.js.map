{
  "version": 3,
  "sources": ["../src/maze.js", "../src/test.js"],
  "sourcesContent": ["Array.prototype.randomEntry = function() {\n\tconst i = ~~ (Math.random() * 1e6) % this.length\n\treturn [ i, this[i] ]\n}\n\nexport default class Maze {\n\tstatic WALL = 0\n\tstatic BARRIER = 1\n\tstatic PATH = 2\n\n\tstatic print_chars = \"#X \"\n\tstatic draw_colors = [ \"black\", \"blue\", \"transparent\" ]\n\n\tstatic dx = [ [ 0, -1 ], [ 0, 1 ] ]\n\tstatic dy = [ [ -1, 0 ], [ 1, 0 ] ]\n\tstatic dxy = [ ...Maze.dx, ...Maze.dy ]\n\n\tconstructor(r_max, c_max) {\n\t\tthis.r_max = r_max\n\t\tthis.c_max = c_max\n\t\tthis.map = Array(r_max + 2).fill().map((_, r) => Array(c_max + 2).fill().map((_, c) => ({\n\t\t\ttype: c === 0 || r === 0 || c === c_max + 1 || r === r_max + 1 ? Maze.WALL : r % 2 + c % 2, r, c\n\t\t})))\n\t}\n\n\tneighbor(r, c, dir = \"xy\") {\n\t\treturn Maze[`d${dir}`].map(([ dr, dc ]) => [ r + dr, c + dc ]).filter(([ r, c ]) =>\n\t\t\tr >= 1 && r <= this.r_max && c >= 1 && c <= this.c_max\n\t\t).map(([ r, c ]) => this.map[r][c])\n\t}\n\n\tcells() {\n\t\treturn this.map.flat()\n\t}\n\t[Symbol.iterator]() {\n\t\treturn this.cells().values()\n\t}\n\n\tasync randomize(r_in, c_in, { show_progress, fps } = {}) {\n\t\tconst Bs_marked = []\n\t\tconst visit = ({ r, c }) => {\n\t\t\tthis.map[r][c].visited = true\n\t\t\tthis.neighbor(r, c).filter(({ type }) => type === Maze.BARRIER).forEach(cell => {\n\t\t\t\tcell.sides = this.neighbor(cell.r, cell.c, cell.r % 2 ? \"x\" : \"y\")\n\t\t\t\tcell.visited = true\n\t\t\t\tBs_marked.push(cell)\n\t\t\t})\n\t\t}\n\t\tvisit({ r: r_in, c: c_in })\n\t\twhile (Bs_marked.length) {\n\t\t\tif (show_progress) {\n\t\t\t\tshow_progress(this)\n\t\t\t\tawait new Promise(res => setTimeout(res, 1000 / fps))\n\t\t\t}\n\t\t\tconst [ i, B_random ] = Bs_marked.randomEntry()\n\t\t\tconst P_unvisited = B_random.sides.find(({ visited }) => ! visited)\n\t\t\tif (P_unvisited) {\n\t\t\t\tB_random.type = Maze.PATH\n\t\t\t\tvisit(P_unvisited)\n\t\t\t}\n\t\t\telse B_random.visited = false\n\t\t\tBs_marked.splice(i, 1)\n\t\t}\n\t\tfor (const cell of this) {\n\t\t\tif (cell.type === Maze.BARRIER) cell.type = Maze.WALL\n\t\t\tdelete cell.visited\n\t\t}\n\t}\n\n\tdraw({ canvas, zoom }) {\n\t\tcanvas.width = (this.c_max + 2) * zoom\n\t\tcanvas.height = (this.r_max + 2) * zoom\n\t\tconst ctx = canvas.getContext(\"2d\")\n\t\tfor (const { r, c, type, visited } of this) {\n\t\t\tctx.fillStyle = Maze.draw_colors[type]\n\t\t\tctx.fillRect(r * zoom, c * zoom, zoom, zoom)\n\t\t\tif (visited) {\n\t\t\t\tctx.fillStyle = \"red\"\n\t\t\t\tctx.fillRect((r + .25) * zoom, (c + .25) * zoom, .5 * zoom, .5 * zoom)\n\t\t\t}\n\t\t}\n\t}\n}\n", "; (async () => {\n\tconst { default: Maze } = await import(\"./maze.js\")\n\tconst maze = new Maze(25, 25)\n\tconst canvas = document.createElement(\"canvas\")\n\tdocument.body.appendChild(canvas)\n\tconst draw = () => maze.draw({ canvas, zoom: 15 })\n\tawait maze.randomize(1, 1, { show_progress: draw, fps: 40 })\n\tdraw()\n\tObject.assign(window, { Maze, maze })\n})()\n"],
  "mappings": "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",
  "names": []
}
